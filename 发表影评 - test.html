<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>发表影评</title>
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/aaa.css">
<style type="text/css">
.article-edit{position: relative;z-index: 2;}
.ipt-pic{position: absolute;top: 0;right: 0;width: 100%;height: 100%;opacity: 0;}
</style>
</head>

<body>
<div class="article-wrap">

    <div class="art-upload">
        <div class="art-upload-bg" style="min-height:500px;overflow:hidden;">
            <img id="img" src="images/bg-common.jpg" style="position: absolute;left:0;" />
            <canvas id="canvas" style="display:none"></canvas>
        </div>
        <div class="art-in">
            <div class="upload-opt">
                <a href="javascript:;" class="btn-upload"><span class="ico-up-add"></span><input type="file" id="btnPic" class="ipt-pic" /></a>
                <h1>添加影评首图</h1>
                <p>为了影评的质量，建议使用宽度超过1920的图片</p> 
            </div>
            <div class="upload-set">
                <p class="txt-set">设置首图</p>
                <div class="drop-set">
                    <a href="#">编辑首图</a><a href="#">重新上传</a>
                </div>
            </div>
            
        </div>

        <div class="tit-edit">
                <input type="text" class="ipt-art-tit" placeholder="在这里编辑标题" />
                <p class="txt-num"><span>0</span>/50</p>
            </div>
    </div>

    <div class="article-edit">
        <div class="art-in">
            <div class="edit-panel" contentEditable = "true">
                <p>请在这里开始你的影评</p>
                <img src="" id="newImg" alt="">
                <div>
                    <p>&#8203;&#8203;&#8203;</p><p img-box="img-box" class="picbox"><img src="https://wx3.sinaimg.cn/large/678483abgy1fjgquhtwrcj20gp086t9u.jpg"></p><p>（这是Sheldon的第54篇漫画，所有图片大约4.9MB。）<br></p><p>在量子通信、量子计算和科幻小说中，有一种神奇的状态扮演着重要的角色。</p><p>如果有一对粒子形成了这种状态，不论它们相距多远，只要你测量其中一个粒子，另一个粒子也会瞬间发生响应——在常人眼中，它们仿佛能够超越光速的限制，形成了一种“超光速的心灵感应”——就连爱因斯坦也无法透彻地理解这种概念，只好揶揄说，这是一种“鬼魅般的超距作用”。</p><p>在科幻小说《三体》中，这种状态更是成了推动小说情节发展的关键黑科技。借助这种状态，三体人再也不用担心光速的限制，能够从4.2光年外的老家，向地球瞬时传递信息，顺利完成在地球上扶植人奸的任务。</p><p>说到这儿，你可能想起来了，这种神秘的状态就是深受朋友圈伪科学文章欢迎的、让霍金的哥们罗杰•彭罗斯从一个正统科学家滑入民科深渊的“<b>量子纠缠</b>”。</p><p>在2017年初，量子卫星“墨子号”施展了一项关于量子纠缠的绝活：<a href="http://weibo.com/ttarticle/p/show?id=2309404119271423794492&amp;mod=zwenzhang" target="_blank">在1200千米的距离上，完成了量子纠缠光子对的分发实验。</a></p><p>量子卫星的另一项绝活也跟量子纠缠有关，这项绝活在科幻小说中的名字比量子纠缠还要响亮，叫做“<b>量子传送</b>”（它的学名叫做<b>量子隐形传态</b>）。</p><p>今天我们要说的是，中国科学家首次将地球上物质的量子状态，“传送”到了1400千米外的 “墨子号”量子卫星上。他们是怎么做到的呢？</p><p img-box="img-box" class="picbox"><img src="https://wx3.sinaimg.cn/large/678483abgy1fjgqv8fjk6j20yq0923yx.jpg"></p><p>&#8203;</p><p>量子传送可不是你想象的那样：把人关进一个玻璃罩里，用一束光一照，嗖的一声，他就消失了。</p><p img-box="img-box" class="picbox"><img src="https://wx4.sinaimg.cn/large/678483abgy1fjgqvfoamdj20go19wdkq.jpg"></p><p>&#8203;</p><p>然后在一千公里之外的太空，又有一束光一照，嗖的一声，那个人就传送好了。</p><p>&#8203;</p><p>你想的太美了，那是魔法传送，在科学上实现不了。</p><p>跟魔法传送相比，量子卫星完成的量子传送实验，有<b>4个</b>不一样的地方。</p><p><b>1. 量子传送不能凭空把物体传送到远处。</b>它传送的是一个粒子的量子状态，而不是粒子本身。我们姑且把这个粒子叫作X。</p><p>&#8203;</p><p>量子传送的过程也不是凭空发生的，而是需要借助一个粒子（我们把它叫作A），将X的量子状态传送到远处另一个粒子（我们把它叫作B）的身上。在中国的地星量子隐形传态实验中，这三个粒子都是光子。</p><p>&#8203;</p><p>量子传送进行的时候，物质既没有凭空消失，也没有凭空出现。传送之前有三个粒子，传送之后还是三个粒子。只不过三个粒子的状态都变了。</p><p>2. 实验用到的粒子可不是随便选的。<b>A和B在传送之前，必须先形成量子纠缠的状态。</b>量子传送，就是利用A和B之间的量子纠缠，通过X和A的相互作用，将X的量子状态的一些特征，传送到遥远的B身上。</p><p img-box="img-box" class="picbox"><img src="https://wx1.sinaimg.cn/large/678483abgy1fjgqz0w9dvj20gp09ewg5.jpg"></p><p>&#8203;</p><p><b>3.量子传送不能超越光速传递信息</b>（爱因斯坦：读到此处，破涕为笑）。</p><p>你可能会问了，刚才不是说，“如果一对粒子发生了量子纠缠，只要你测量其中一个粒子，另一个粒子也会瞬间发生响应”吗？如果另一个粒子能够瞬间响应，难道不可以利用它超光速传递信息吗？&nbsp;</p><p>其实，之前提到的“另一个粒子瞬间发生响应”，并没有本质错误。当我们测量量子纠缠中的一个粒子时，另一个粒子的响应确实是超越光速瞬间产生的。但<b>这种响应完全是一种掷骰子式的随机行为，根本不能用来传递信息。</b></p><p>比方说，在量子传送中，当X和A产生相互作用的一刹那，量子力学就会犯它的老毛病，让“上帝”开始“掷骰子”（爱因斯坦：才下眉头，却上心头），随机产生4种结果中的1种！</p><p>&#8203;</p><p>此时，X的量子状态的一些特征，确实传送到B的身上。但在可能传送到B身上的4种结果中，有3种结果会以不同的方式将这些特征打乱，重新组合。</p><p>在每一次的量子传送实验中，“上帝”都会“掷骰子”，随机从4种传送结果中选1种。B到底会得到什么样的结果，科学家根本控制不了，所以是完全是随机产生的。</p>
                </div>
            </div>
            <div class="edit-opt"><!-- fixed -->
                <a href="#" title="加粗"><span class="ico-c-opt ico-c-bold"></span>文本加粗</a>
                <a href="#" title="插入图片"><span class="ico-c-opt ico-c-pic"></span>插入图片</a>
                <a href="#" title="插入视频"><span class="ico-c-opt ico-c-video"></span>插入视频</a>
            </div>
        </div>
        <div class="edit-info">
            <div class="art-in">
                <div class="progress">
                    <p class="txt-pro">影评完成度<span>25%</span></p>
                    <div class="pro-icon">
                        <span class="ico-c-finish ico-f-new done"></span><!-- 完成叠加'done' -->
                        <span class="ico-c-finish ico-f-pic"></span>
                        <span class="ico-c-finish ico-f-tit"></span>
                        <span class="ico-c-finish ico-f-txt done"></span>
                    </div>
                </div>
                <div class="edit-info-opt">
                    <a href="#" class="btn-edit-draft">保存草稿</a>
                    <a href="javascript:;"  id="btnOk" class="btn-edit-sumbit ">发表</a>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">  
    var img = document.getElementById("img");  
    var wrap = document.querySelector('.art-upload-bg');
    var boxWidth = 1280;
    var boxHeight = 650;
    var perImg = boxWidth/boxHeight;
    var btnPic = document.getElementById('btnPic');
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    canvas.setAttribute('width',boxWidth)
    canvas.setAttribute('height',boxHeight)
    
     //读取图片
     btnPic.onchange = function(){
        preImg(this.id,'img');
        document.querySelector('.upload-opt').style.display = 'none';
        img.style.top = 0;
        wrap.style.cursor = 'move';
        var ww = document.body.clientWidth;
        var hh = ww/perImg;
        wrap.style.height = `${hh}px`;
    }    
    function preImg(sourceId, targetId) { 
        var url = getFileUrl(sourceId); 
        var imgPre = document.getElementById(targetId); 
        imgPre.src = url; 
    } 
    function getFileUrl(sourceId) { 
        var url; 
        if (navigator.userAgent.indexOf("MSIE")>=1) { // IE 
            url = document.getElementById(sourceId).value; 
        } else if(navigator.userAgent.indexOf("Firefox")>0) { // Firefox 
            url = window.URL.createObjectURL(document.getElementById(sourceId).files.item(0)); 
        } else if(navigator.userAgent.indexOf("Chrome")>0) { // Chrome 
            url = window.URL.createObjectURL(document.getElementById(sourceId).files.item(0)); 
        } 
        return url; 
    } 

    //拖拽图片
    img.addEventListener('mousedown',function(e){   
        e.preventDefault();
        e.returnValue = false;
        var disX = e.clientX - img.offsetLeft;  
        var disY = e.clientY - img.offsetTop;  
        document.onmousemove=function (e)  {         
            var y = e.clientY - disY;
            var x = e.clientX - disX;
            var d = img.clientHeight - wrap.clientHeight;
            if( y < 0){
                if( Math.abs(y) < d ){
                    img.style.left = '0';  
                    img.style.top = e.clientY - disY+"px"; 
                }else{
                    img.style.left = '0';  
                    img.style.top = `${-d}px`;
                }
             
            }else{
                img.style.left = '0';  
                img.style.top = '0'
            }  
        }  
        document.onmouseup = function() {
            document.onmousemove = null;
            document.onmouseup = null;
        };    
    })

    // 生成图片
    var btnOk = document.getElementById('btnOk')
    btnOk.addEventListener('click',function(){
        var disH = img.style.top;
        disH = disH.replace(/[^0-9]+/g, '');
        var tPer = disH / img.clientHeight;          
        var images = new Image();
        images.src = img.src;         
        images.onload = function(){
            var imgWidth = images.width;
            var imgHeight = images.height;
            drawWidth = imgWidth;
            drawHeight = imgWidth/perImg;
            newDis = Math.ceil(tPer*images.height);    
            ctx.drawImage(images,0, newDis, drawWidth,drawHeight,0,0,boxWidth,boxHeight);
            var imgData = canvas.toDataURL('image/jpeg',1).replace("image/jpeg", "image/octet-stream");
            console.log(imgData)
            document.getElementById('newImg').src = canvas.toDataURL();
        }
    })

            


   

</script>  
</body>
</html>
